<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0.1//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="author" content="">
<link media="screen" type="text/css" rel="stylesheet" href=".././css/apache.css">
<link media="print" type="text/css" rel="stylesheet" href=".././css/print.css">
<title>Building Cactus from the Source</title>
</head>
<body>
<table width="100%" cellspacing="0" id="header">
<tr>
<td id="projectLogo" class="logo"><a href="http://jakarta.apache.org/"><img alt="The Apache Jakarta Project" src=".././images/jakarta-logo.gif"></a></td><td id="subprojectLogo" class="logo"><a href="http://jakarta.apache.org/cactus/"><img alt="Building Cactus from the Source" src=".././images/logocactus.gif"></a></td>
</tr>
<tr id="contextBar">
<td id="breadCrumbs"><a href="http://www.apache.org/">Apache</a> &gt; <a href="http://jakarta.apache.org/">Jakarta</a> &gt; <a href=".././index.html">Cactus</a> &gt; <a href=".././participating/index.html">Participating</a></td><td id="status">
              Docs for:
              <strong>v1.7.2</strong> | <a href=".././..">v1.7</a>
              &nbsp;&nbsp;
              Last update: March 26 2006</td>
</tr>
</table>
<table id="main">
<tr>
<td id="sidebar">
<div id="navigation">
<ul>

  
<li>
<a href=".././index.html" title="Describes what the Cactus framework is, defines several types of unit tests and explains which are best implemented with Cactus.">Main Page</a>
<ul></ul>
</li>

  
<li>Participating<ul>
    
<li>
<a href=".././participating/index.html" title="Information on participating in the development of Cactus.">Introduction</a>
</li>
    
<li>
<a href=".././participating/contributors.html" title="Lists people who are or have been contributing to Cactus.">Contributors</a>
</li>
    
<li>
<a href=".././participating/users.html" title="Informal list about who is using Cactus.">Who Uses Cactus?</a>
</li>
  
</ul>
</li>

  
<li>Developers<ul>
    
<li>
<a target="bug_database_cactus_open_issues" href="http://issues.apache.org/jira/browse/CACTUS?report=com.atlassian.jira.plugin.system.project:openissues-panel">Todo/Open Issues</a>
</li>
    
<li>
<a href=".././participating/build_result.html" title="Aggregated links to the results of the nightly builds.">Nightly Build Results</a>
</li>
    
<li>
<a href=".././participating/coding_conventions.html" title="The coding conventions used for the development of Cactus itself.">Coding Conventions</a>
</li>
    
<li>
<a href=".././participating/apis.html" title="Explains how the Cactus project differentiates between public API/SPI and internal implementation classes.">Public API/SPIs</a>
</li>
    
<li>
<a target="cvs" href="http://jakarta.apache.org/site/cvsindex.html">CVS</a>
</li>
    
<li>
<a href=".././participating/howto_build.html" title="How to build Cactus from source." class="currentPage">Building From Source</a>
</li>
    
<li>
<a href=".././participating/coverage.html" title="Cactus code coverage reports (generated by Clover)">Code Coverage Reports</a>
</li>
    
<li>
<a href=".././participating/release_checklist.html" title="Things that are important to check when preparing a release of Cactus.">Release Checklist</a>
</li>
  
</ul>
</li>

  
<li>Miscellaneous<ul>
    
<li>
<a href=".././participating/logos.html" title="Logos for Cactus proposed by various people.">Logos</a>
</li>
  
</ul>
</li>


<li>
<img src="images/cactusbanner.gif"></li>
</ul>
</div>
</td><td id="content">

  

  

    
<div class="section">
<h1>Introduction</h1>
      
<p>
        This tutorial explains how to build Cactus from CVS or from a source
        download.
      </p>
      
<div class="note">
        If you just want to use Cactus, it will be easier to simply download
        a <a href=".././downloads.html" title="Downloads of Cactus releases and nightly builds.">nightly build</a> (if you need the
        latest and greatest), or the latest 
        <a href=".././downloads.html" title="Downloads of Cactus releases and nightly builds.">stable release</a> otherwise.
      </div>
    
</div>

    
<div class="section">
<h1>Getting the Source</h1>
      
<p>
        There are two ways to obtain the source code for Cactus: either 
        directly from CVS, or by downloading a prepackaged source archive.
      </p>

      
<div class="section">
<h2>CVS</h2>
      	
<p>
          To get the current development version of the Cactus source code,
          you'll need to download the source from CVS. To do this, you'll need
          to have a CVS client installed.
        </p>
        
<p>
          Detailed instructions about accessing the Apache CVS repository can
          be found
          <a href="http://jakarta.apache.org/site/cvsindex.html" title="">here</a>. The module name for Cactus is 
          <code>jakarta-cactus</code>.
        </p>
      
</div>

      
<div class="section">
<h2>Prepackaged Source Archives</h2>
        
<p>
          If you don't have access to the Apache CVS repository (because you're
          behind a firewall, for example), or you don't need to be absolutely 
          up to date, you can download an archive containing a snapshot of the
          Cactus code base.
        </p>
        
<p>
          Such archives are made available for each release as well as for the
          nightly builds. Go <a href=".././downloads.html" title="Downloads of Cactus releases and nightly builds.">here</a> to find 
          out about the download locations.
        </p>
      
</div>

    
</div>

    
<div class="section">
<h1>Prerequisites</h1>

      
<p>
        The following sections list java libraries that you need to have
        present in your local filesystem for the build. 
        <b>Do not worry!</b> We won't ask you to fish around to 
        get these libraries :-)
        We have created an Ant script that does this automatically. The
        next section on <a href="#build">Performing Builds</a>
        explains how to use it.
      </p>

      
<div class="section">
<h2>Ant</h2>

        
<p>
          To build Cactus from source, you'll need to have
          <a href="http://ant.apache.org/" title="">Ant</a> 1.6.1 (or later) installed. For
          building the Maven plugin you'll need to have 
          <a href="http://maven.apache.org" title="">Maven</a> 1.0 (or later) installed.
        </p>

        
<p>
          You'll need to have the following libraries put in your 
          <code>[ANT_HOME]/lib/</code> directory.
        </p>
        
        
<div class="tabular">
<table cellpadding="2" cellspacing="2" border="0">
<caption></caption>
          
<tr>
            
<th>Name</th>
            <th>Optional?</th>
            <th>Version</th>
            <th>Description</th>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://junit.org" title="">junit.jar</a>
            </td>
            <td>
              No
            </td>
            <td nowrap="true">
              3.8.1 or later
            </td>
            <td>
              The JUnit unit testing framework.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://xml.apache.org/xalan-j/" title="">xalan.jar</a>
            </td>
            <td>
              Yes. Required only if you're building with a JDK version lower 
              than 1.4. You should also be able to use a different XSLT 
              processor.
            </td>
            <td nowrap="true">
              (not sure - we need to find the version)
            </td>
            <td>
              A XSLT processor.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://www.cenqua.com/clover/" title="">clover.jar</a>
            </td>
            <td>
              Yes. Required only to run the release build of Cactus or if you 
              have turned on "clovering" (<code>clover.enable = true</code>).
            </td>
            <td nowrap="true">1.2.3</td>
            <td>
              Clover code coverage tool.
            </td>
          
</tr>
        
</table>
</div>

      
</div>
      
      
<div class="section">
<h2>Required Libraries</h2>

        
<p>
          In addition, Cactus depends on a number of additional external
          libraries at build time. The locations of these libraries on 
          your file system should be specified in your
          <code>build.properties</code> file at the root of the Cactus 
          source distribution. The next section on 
          <a href="#build">Performing Builds</a> explains how to
          automatically download these libraries.
        </p>

        
<div class="tabular">
<table cellpadding="2" cellspacing="2" border="0">
<caption></caption>
          
<tr>
            
<th>Name</th>
            <th>Version</th>
            <th>Description</th>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://www.eclipse.org/aspectj/" title="">aspectjrt.jar</a>
            </td>
            <td nowrap="true">1.1.1</td>
            <td>
              The AspectJ runtime.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://www.eclipse.org/aspectj/" title="">aspectjtools.jar</a>
            </td>
            <td nowrap="true">1.1.1</td>
            <td>
              The AspectJ compiler and other tools.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://jakarta.apache.org/commons/httpclient/" title="">commons-httpclient.jar</a>
            </td>
            <td nowrap="true">2.0</td>
            <td>
              Jakarta Commons HttpClient.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://jakarta.apache.org/commons/logging/" title="">commons-logging.jar</a>
            </td>
            <td nowrap="true">1.0.3</td>
            <td>
              Jakarta Commons Logging.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://junit.org" title="">junit.jar</a>
            </td>
            <td nowrap="true">3.8.1</td>
            <td>
              The JUnit framework.<br>
              
<i>This JAR file must be placed in the <code>lib</code>
              directory of your Ant installation, or Ant will not be able
              to load the required classes.</i>
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              servlet.jar
            </td>
            <td nowrap="true">2.2, 2.3 or 2.4</td>
            <td>
              The Servlet/JSP API.<br>
              
<i>This JAR file comes with your servlet container or
              application server. To perform a complete build of Cactus, you'll
              need to have JARs for versions 2.2, 2.3 and 2.4 of the servlet
              API.</i>
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://checkstyle.sf.net" title="">checkstyle.jar</a>
            </td>
            <td nowrap="true">3.4</td>
            <td>
              The Checkstyle code auditing tool.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://antlr.org/" title="">antlr.jar</a>
            </td>
            <td nowrap="true">2.7.2</td>
            <td>
              The ANTLR translator generator (required by Checkstyle).
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://jakarta.apache.org/commons/beanutils/" title="">commons-beanutils.jar</a>
            </td>
            <td nowrap="true">1.6.1</td>
            <td>
              Jakarta Commons BeanUtils (required by Checkstyle).
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://jakarta.apache.org/commons/collections/" title="">commons-collections.jar</a>
            </td>
            <td nowrap="true">2.1</td>
            <td>
              Jakarta Commons Collections (required by Checkstyle).
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://jakarta.apache.org/regexp/" title="">regexp.jar</a>
            </td>
            <td nowrap="true">1.3</td>
            <td>
              Jakarta RegExp (required by Checkstyle).
            </td>
          
</tr>
          
<tr>
            
<td>
              <a href="http://httpunit.sourceforge.net/" title="">httpunit.jar</a>
            </td>
            <td nowrap="true">1.5.4</td>
            <td>
              HttpUnit. Required for testing the
              <a href=".././writing/howto_httpunit.html" title="How to use HttpUnit tests inside Cactus test cases">HttpUnit</a> integration.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://www.apache.org/~andyc/neko/doc/html/" title="">nekohtml.jar</a>
            </td>
            <td nowrap="true">0.8.1</td>
            <td>
              The Cyberneko HTML parser (required by HttpUnit).
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://jakarta.apache.org/log4j/" title="">log4j.jar</a>
            </td>
            <td nowrap="true">1.2.8</td>
            <td>
              Jakarta Log4j. Required for packaging the Cactus distribution.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://jakarta.apache.org/taglibs/doc/standard-doc/intro.html" title="">jstl.jar</a>
            </td>
            <td nowrap="true">1.0.2</td>
            <td>
              JSP Standard Tag Library. Required for compiling and running the
              servlet sample test suite on J2EE 1.3.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://jakarta.apache.org/taglibs/doc/standard-doc/intro.html" title="">standard.jar</a>
            </td>
            <td nowrap="true">1.0.2</td>
            <td>
              Jakarta Standard Taglib. Required for compiling and running the
              servlet sample test suite on J2EE 1.3.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://mortbay.org/jetty/" title="">jetty.jar</a>
            </td>
            <td nowrap="true">4.2.17</td>
            <td>
              Jetty Servlet container. Required to build and run the Jetty 
              sample project.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://www.ibiblio.org/maven/tomcat/jars" title="">jasper-compiler.jar</a>
            </td>
            <td nowrap="true">4.1.30</td>
            <td>
              JSP engine required by Jetty to process JSPs. Required to build
              and run the Jetty sample project.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://www.ibiblio.org/maven/tomcat/jars" title="">jasper-runtime.jar</a>
            </td>
            <td nowrap="true">4.1.30</td>
            <td>
              JSP engine required by Jetty to process JSPs. Required to build
              and run the Jetty sample project.
            </td>
          
</tr>
          
<tr>
            
<td nowrap="true">
              <a href="http://www.mockobjects.com" title="">mockobjects-core.jar</a>
            </td>
            <td nowrap="true">0.09</td>
            <td>
              Mock object library used by several unit tests.
            </td>
          
</tr>
        
</table>
</div>
      
</div>

    
</div>

    
<div class="section">
<h1>Understanding the Directory Structure</h1>
      
<p>
        The Cactus project is divided into several modules, each having 
        its own build:
      </p>
      
<ul>
      	
<li>
<strong>documentation/</strong>
<br>
</li>
      	
      	  The Cactus documentation.
      	
        <li>
<strong>framework/</strong>
<br>
</li>
        
          The Cactus framework.
        
        <li>
<strong>integration/</strong>
<br>
</li>
        
          Various tool integration modules.
          <ul>
            
<li>
<strong>ant/</strong>
<br>
</li>
            
              
<a href="http://ant.apache.org/" title="">Ant</a> tasks and support classes
              provided by Cactus.
            
            <li>
<strong>eclipse/</strong>
<br>
</li>
            
              Plugins for integration with the open-source IDE
              <a href="http://www.eclipse.org" title="">Eclipse</a>.
            
            <li>
<strong>maven/</strong>
<br>
</li>
            
              
<a href="http://maven.apache.org" title="">Maven</a> plugins for Cactus.
            
          </ul>
        
        
<li>
<strong>samples/</strong>
<br>
</li>
        
          Sample applications using Cactus.
          <ul>
            
<li>
<strong>jetty</strong>
<br>
</li>
            
              Sample application that demonstrates the use of the 
              <a href=".././integration/integration_jetty.html" title="Explains how to use the special integration Cactus provides for the Jetty servlet container.">Jetty integration</a>.
            
            <li>
<strong>servlet</strong>
<br>
</li>
            
              Sample web-application using Cactus. It currently also acts as
              functional and regression test suite for the Cactus framework.
            
            <li>
<strong>ejb</strong>
<br>
</li>
            
              Sample EJB using Cactus. It currently also acts as
              functional and regression test suite for the Cactus framework.
            
          </ul>
        
      
</ul>
      
<p>
        All modules follow a similar directory structure and they all use
        Ant as the build tool (except for the <code>maven/</code> module
        which is built with Maven.
      </p>
    
</div>

    
<div class="section">
<h1>Performing Ant builds</h1>

      
<p>
        Good news: it should be extremely easy to build Cactus from the 
        sources! :-) After ensuring that you connected to internet, type the 
        following 2 commands one after another:
      </p>
      
<ul>
        
<li>
          
<b><code>ant -f download.xml</code></b>: This will 
          automatically download all the required libraries. It takes about
          5 minutes on a 512 kbps internet connection the first time. If you're
          behind a firewall, you'll need to read below how to customize the
          Cactus build as you'll need to edit your <code>build.properties</code>
          file and supply proxy information.
        </li>
        
<li>
          
<b><code>ant</code></b> 
          or <b><code>ant dist</code></b>: This will build
          the different Cactus modules for the default J2EE API (at the 
          time of this writing the default is J2EE 1.3).
        </li>
      
</ul>
      
<p>
        The build result will be located in the <code>dist-*</code> directories
        of the different Cactud subprojects.
      </p>

      
<p>
        Now, there are 2 files that you may wish to copy and edit if you wish
        to customize the Cactus build:
      </p>
      
<ul>
        
<li>
          
<b><code>build.properties.default</code></b>: This file 
          contains the default Cactus build configuration properties. You should
          not edit it. Rather you should copy it to a file named 
          <code>build.properties</code> which you can then edit. The file is
          self-documented.
        </li>
        
<li>
          
<b><code>dependencies.xml.default</code></b>: This file
          contains the list of Cactus library dependencies along with their 
          versions. You should not edit this file. Rather, if you wish to use 
          other versions, you should copy this file to a file named
          <code>dependencies.xml</code> which you can then edit.
        </li>
      
</ul>

      
<p>
        To get help about the Ant targets available to build a given subproject,
        open a shell, change into the module directory and execute
        <code>ant -projecthelp</code>. That will give you the list of 
        available Ant targets:
      </p>


<div class="source">
<pre>
$ cd framework
$ ant -projecthelp
Buildfile: build.xml

 Cactus Framework
 ---------------------------------------------------------
 Contains the core classes of the Cactus in-container
 testing framework.

Main targets:

 checkstyle  Perform a code audit using Checkstyle
 clean       Clean all generated files
 compile     Compile the sources
 dist        Generate the distributable files
 doc         Generates the API documentation
 jar         Generate the library jar
 test        Run the unit tests

Default target: dist
</pre>
</div>
        
      
<p>
        Then, simply execute the target you need. To build the framework, you
      	can invoke <code>ant dist</code> or just <code>ant</code> (because
      	<i>dist</i> is the default target). If you just want to build the
      	framework JAR or the API documentation, invoke <code>ant jar</code>
      	or <code>ant doc</code>, respectively.
      </p>

<div class="source">
<pre>
$ cd framework
$ ant dist
</pre>
</div>
      
<div class="note">
        Some projects depend on others and thus you may need to run the build
        for those projects first. For example, the servlet sample depends on
        the framework and the Ant integration, so these will need to be built
        before the servlet sample is built. To avoid these problems you can
        simply type <code>ant dist</code> at the top level as it builds the
        different projects in the correct order.
      </div>

      
<p>
        Before creating a patch, and especially before committing changes, be
        sure to run both the <i>checkstyle</i> and <i>test</i> targets of
        the corresponding module. Often we will also need to run the servlet
        sample tests, because they effectively represent the regression test
        suite for Cactus. You might want to simply perform a full rebuild to
        be sure that nothing has been negatively affected by your changes.
      </p>
    
</div>

    
<div class="section">
<h1>Generating the Maven plugin</h1>

      
<p>
        To generate the maven plugin, you must first perform the Ant build (see above). Than you just need to go to the <code>integration/maven</code> sub-directory and run <code>maven plugin:install</code>.
      </p>

    
</div>

  


</td>
</tr>
</table>
<div id="footer">
<p>
	    Copyright &copy; 2000-2004 The Apache Software Foundation.
            All Rights Reserved.
	  </p>
</div>
</body>
</html>
