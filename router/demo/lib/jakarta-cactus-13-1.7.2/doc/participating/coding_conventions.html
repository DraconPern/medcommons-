<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0.1//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="author" content="">
<link media="screen" type="text/css" rel="stylesheet" href=".././css/apache.css">
<link media="print" type="text/css" rel="stylesheet" href=".././css/print.css">
<title>Coding Conventions</title>
</head>
<body>
<table width="100%" cellspacing="0" id="header">
<tr>
<td id="projectLogo" class="logo"><a href="http://jakarta.apache.org/"><img alt="The Apache Jakarta Project" src=".././images/jakarta-logo.gif"></a></td><td id="subprojectLogo" class="logo"><a href="http://jakarta.apache.org/cactus/"><img alt="Coding Conventions" src=".././images/logocactus.gif"></a></td>
</tr>
<tr id="contextBar">
<td id="breadCrumbs"><a href="http://www.apache.org/">Apache</a> &gt; <a href="http://jakarta.apache.org/">Jakarta</a> &gt; <a href=".././index.html">Cactus</a> &gt; <a href=".././participating/index.html">Participating</a></td><td id="status">
              Docs for:
              <strong>v1.7.2</strong> | <a href=".././..">v1.7</a>
              &nbsp;&nbsp;
              Last update: March 26 2006</td>
</tr>
</table>
<table id="main">
<tr>
<td id="sidebar">
<div id="navigation">
<ul>

  
<li>
<a href=".././index.html" title="Describes what the Cactus framework is, defines several types of unit tests and explains which are best implemented with Cactus.">Main Page</a>
<ul></ul>
</li>

  
<li>Participating<ul>
    
<li>
<a href=".././participating/index.html" title="Information on participating in the development of Cactus.">Introduction</a>
</li>
    
<li>
<a href=".././participating/contributors.html" title="Lists people who are or have been contributing to Cactus.">Contributors</a>
</li>
    
<li>
<a href=".././participating/users.html" title="Informal list about who is using Cactus.">Who Uses Cactus?</a>
</li>
  
</ul>
</li>

  
<li>Developers<ul>
    
<li>
<a target="bug_database_cactus_open_issues" href="http://issues.apache.org/jira/browse/CACTUS?report=com.atlassian.jira.plugin.system.project:openissues-panel">Todo/Open Issues</a>
</li>
    
<li>
<a href=".././participating/build_result.html" title="Aggregated links to the results of the nightly builds.">Nightly Build Results</a>
</li>
    
<li>
<a href=".././participating/coding_conventions.html" title="The coding conventions used for the development of Cactus itself." class="currentPage">Coding Conventions</a>
</li>
    
<li>
<a href=".././participating/apis.html" title="Explains how the Cactus project differentiates between public API/SPI and internal implementation classes.">Public API/SPIs</a>
</li>
    
<li>
<a target="cvs" href="http://jakarta.apache.org/site/cvsindex.html">CVS</a>
</li>
    
<li>
<a href=".././participating/howto_build.html" title="How to build Cactus from source.">Building From Source</a>
</li>
    
<li>
<a href=".././participating/coverage.html" title="Cactus code coverage reports (generated by Clover)">Code Coverage Reports</a>
</li>
    
<li>
<a href=".././participating/release_checklist.html" title="Things that are important to check when preparing a release of Cactus.">Release Checklist</a>
</li>
  
</ul>
</li>

  
<li>Miscellaneous<ul>
    
<li>
<a href=".././participating/logos.html" title="Logos for Cactus proposed by various people.">Logos</a>
</li>
  
</ul>
</li>


<li>
<img src="images/cactusbanner.gif"></li>
</ul>
</div>
</td><td id="content">

  

  

    
<div class="section">
<h1>Forewords</h1>

      
<p>
        This document describes a list of coding conventions that are
        required for code submissions to the project. By default, the coding
        conventions for most Open Source Projects should follow the existing
        coding conventions in the code that you are working on. For example,
        if the bracket is on the same line as the if statement, then you
        should write all your code to have that convention.
      </p>
      
<div class="note">
        
<b>If you commit code that does not follow these conventions and
        you are caught, you are responsible for also fixing your own code.
        </b>
      
</div>
      
<p>
         Below is a list of coding conventions that are specific to Cactus,
         everything else not specificially mentioned here should follow the
         official <a href="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html" title="">Sun Java Coding 
         Conventions</a>.
      </p>

    
</div>

    
<div class="section">
<h1>How to apply?</h1>

      
<p>
        Having coding conventions is nice but having a way to ensure they are
        applied is even better ... :-)
      </p>
      
<p>
        The Cactus Ant build file has a <code>checkstyle</code> target which
        performs coding conventions using the
        <a href="http://checkstyle.sf.net" title="">Checkstyle</a> tool. Drop the
        Checkstyle jars in your <code>ANT_HOME/lib</code>, go in the
        <code>build/</code> directory and type <code>ant checkstyle</code>.
      </p>
      
<p>
        Please run this target before committing any code.
      </p>

    
</div>

    
<div class="section">
<h1>Cactus specific coding conventions</h1>

      
<div class="section">
<h2>1. Brackets</h2>

        
<p>
          All brackets should begin and end on a <b>new</b> line. Example:
        </p>


<div class="source">
<pre>
public class SomeClass
{
    public void someMethod()
    {
        if (...)
        {
        }
    }
}
</pre>
</div>

        
<p>
          
<b>Brackets are mandatory even for single line statements !
          </b>
        
</p>


<div class="source">
<pre>
// Incorrect
if (expression)
    // some code

// Correct
if (expression)
{
    // some code
}
</pre>
</div>

      
</div>

      
<div class="section">
<h2>2. Blank Spaces</h2>

        
<p>
           keywords followed by a parenthesis should be separated by a space.
           Example:
        </p>


<div class="source">
<pre>
while (true)
{
    // some code
}
</pre>
</div>

        
<p>
          Blank space should appear after commas in argument lists. Binary
          operators should be separated from their operands by spaces:
        </p>


<div class="source">
<pre>
a += c + d;
a = (a + b) / (c * d);

while (d++ = s++)
{
    n++;
}

printSize("size is " + foo + "\n");
</pre>
</div>

      
</div>

      
<div class="section">
<h2>3. Indentations</h2>

        
<p>
          
<b>4 spaces. NO tabs</b>. Period. We understand that a lot
          of you like to
          use tabs, but the fact of the matter is that in a distributed
          development environment, when the cvs commit messages get sent to a
          mailing list, they are almost impossible to read if you use tabs.
        </p>

      
</div>

      
<div class="section">
<h2>4. Comments</h2>

        
<p>
          Javadoc SHOULD exist on all your class members (methods + class
          variables), including the private ones. Also, if you are working on
          existing code and there currently isn't a javadoc for that
          method/class/variable or whatever, then you should contribute and
          add it. This will improve the project as a whole.
        </p>
        
<p>
          Also add code comments when you think it's necessary (like
          assumptions), especially when the code is not obvious.
        </p>

      
</div>

      
<div class="section">
<h2>5. License</h2>

        
<p>
          The Jakarta Apache/Cactus License MUST be placed at the top of each
          and every file.
        </p>

      
</div>

      
<div class="section">
<h2>6. Author references</h2>

        
<p>
          Do not put <code>@author</code> tags in source code. We are following
          the Apache board recommendation. This view is 
          <a href="http://marc.theaimsgroup.com/?l=xml-cocoon-dev&m=107788069123268&w=2" title="">summarized</a> nicely
          by Dirk-Willem Van Gullick, president of the ASF.
        </p>
        
<p>
          However you are very much encouraged to edit the 
          <code>contributors.xml</code> file located in 
          <code>jakarta-cactus/documentation/docs/xdocs/participating/</code>
          which lists contributors' participation.
        </p>

      
</div>

      
<div class="section">
<h2>7. Class variables</h2>

        
<p>
          Class variables should not have any prefix and <b>must</b>
          be referenced using the <code>this</code> object. Example:
        </p>


<div class="source">
<pre>
public class SomeClass
{
    private String someString;
[...]
    public void someMethod()
    {
        logger.debug("Value = " + this.someString);
    }
}
</pre>
</div>

      
</div>

      
<div class="section">
<h2>8. Parameter names</h2>

        
<p>
          Method parameters should be prefixed by "<code>the</code>" (for
          differentiating them from inner variables). For example:
        </p>


<div class="source">
<pre>
public void someMethod(String theClassName)
{
    String className; // inner variable
}
</pre>
</div>

      
</div>

      
<div class="section">
<h2>9. Line length</h2>

        
<p>
          Avoid lines longer than 80 characters for Code, comments, ...
        </p>

      
</div>

      
<div class="section">
<h2>10. Versioning</h2>

        
<p>
          All .java files should have a <code>@version</code> tag like the one
          below.
        </p>


<div class="source">
<pre>
@version $Id: coding_conventions.xml 238846 2004-03-13 14:40:48Z vmassol $
</pre>
</div>

      
</div>

      
<div class="section">
<h2>11. Logging</h2>

        
<p>
          Do <b>not</b> use <code>System.out</code> to log. Instead,
          use the <code>commons-logging</code> Logging system. For example:
        </p>


<div class="source">
<pre>
private static final Log LOGGER = 
    LogFactory.getLog(MyClass.class);

public void someMethod()
{
		LOGGER.debug("some debug text");
}
</pre>
</div>

        
<div class="note">
          As of Cactus 1.3, LogAspect autmatically logs all method entries and
          exits.
        </div>
      
</div>

      
<div class="section">
<h2>12. Exception handling</h2>

        
<p>
          Managing exceptions correctly requires experience. This is not
          supposed to be a guide on managing exceptions, simply a few best
          practices.
        </p>
        
<ul>
          
<li>
            
<b>Rule 1</b>: Try to catch exceptions as much as
            possible and rethrow higher level exceptions (meaning hiding the
            low level detailed and putting a message that is more related to
            the function of your code).
          </li>
          
<li>
            
<b>Rule 2</b>: It is important not to loose the stack
            trace which contains important information. Use chained exceptions
            for that. Cactus provides a <code>ChainedRuntimeException</code>
            for chaining runtime exceptions.
          </li>
          
<li>
            
<b>Rule 3</b>: Always log the exception at the higher
            level (ie. where it is handled and not rethrown).
          </li>
          
<li>
            
<b>Rule 4</b>: Try to avoid catching
            <code>Throwable</code> or <code>Exception</code> and catch
            specific exceptions instead.
          </li>
        
</ul>
        
<p>
          An example:
        </p>


<div class="source">
<pre>
public void getTestClass()
{
    try
    {
        Class responseClass =
            Class.forName("some.package.MyClass");
    } 
    catch (ClassNotFoundException cnfe)
    {
        String message = "Cannot instantiate test class";
        logger.error(message);
        throw new ChainedRuntimeException(message, e);
    }
}
</pre>
</div>

      
</div>

      
<div class="section">
<h2>13. Qualified imports</h2>

        
<p>
          All <code>import</code> statements should containing the full class
          name of classes to import and should not use the <code>"*"</code>
          notation:
        </p>
        
<p>
          An example:
        </p>


<div class="source">
<pre>
// Correct
import java.util.Date;
import java.net.HttpURLConnection;

// Not correct
import java.util.*;
import java.net.*;
</pre>
</div>


      
</div>

    
</div>

  

</td>
</tr>
</table>
<div id="footer">
<p>
	    Copyright &copy; 2000-2004 The Apache Software Foundation.
            All Rights Reserved.
	  </p>
</div>
</body>
</html>
